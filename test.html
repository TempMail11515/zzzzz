<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codeforces Analytics Pro - Test</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div style="padding: 20px;">
        <h1>Codeforces Analytics Pro - Test Page</h1>
        <p>This is a test page to verify the implementation of the requested features:</p>
        <ul>
            <li>✅ Motivational messages in contest progress</li>
            <li>✅ Automatic tag problem counts (already implemented)</li>
            <li>✅ Chart colors matching user rating colors</li>
            <li>✅ Best month message in solved problems</li>
            <li>✅ Enhanced contest progress motivation with specific goals</li>
            <li>✅ Clickable topic and rating cards with problem details</li>
        </ul>
        
        <div class="cf-button-container">
            <button class="cf-analytics-button" onclick="testMotivationalMessage()">Test Motivational Message</button>
            <button class="cf-analytics-button" onclick="testRatingColors()">Test Rating Colors</button>
            <button class="cf-analytics-button" onclick="testEnhancedMotivation()">Test Enhanced Motivation</button>
            <button class="cf-analytics-button" onclick="testProblemsPopup()">Test Problems Popup</button>
        </div>
        
        <div id="test-output" style="margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 8px;"></div>
    </div>

    <script src="simple-charts.js"></script>
    <script src="content.js"></script>
    <script>
        function testMotivationalMessage() {
            const output = document.getElementById('test-output');
            
            // Test different scenarios
            const scenarios = [
                { current: 1200, max: 1200, user: 'testuser' }, // At max rating
                { current: 1300, max: 1400, user: 'testuser' }, // Below max
                { current: 800, max: 1200, user: 'testuser' },  // Newbie
                { current: 1600, max: 1800, user: 'testuser' }  // Specialist
            ];
            
            output.innerHTML = '<h3>Motivational Message Tests:</h3>';
            scenarios.forEach((scenario, index) => {
                const message = getMotivationalMessage(scenario.current, scenario.max, scenario.user);
                output.innerHTML += `
                    <div style="margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px;">
                        <h4>Scenario ${index + 1}: Current=${scenario.current}, Max=${scenario.max}</h4>
                        ${message}
                    </div>
                `;
            });
        }
        
        function testRatingColors() {
            const output = document.getElementById('test-output');
            const ratings = [800, 1200, 1400, 1600, 1900, 2100, 2300, 2400, 2600, 3000];
            
            output.innerHTML = '<h3>Rating Color Tests:</h3>';
            ratings.forEach(rating => {
                const color = getRatingColor(rating);
                const title = getRatingTitle(rating);
                output.innerHTML += `
                    <div style="margin: 10px 0; padding: 10px; border-radius: 8px; background: ${color}; color: white;">
                        Rating: ${rating} - ${title} - Color: ${color}
                    </div>
                `;
            });
        }
        
        function testEnhancedMotivation() {
            const output = document.getElementById('test-output');
            
            // Test different rating scenarios for enhanced motivation
            const scenarios = [
                { current: 800, max: 1200, user: 'testuser' },   // Newbie to Pupil
                { current: 1300, max: 1400, user: 'testuser' },  // Pupil to Specialist
                { current: 1500, max: 1600, user: 'testuser' },  // Specialist to Expert
                { current: 1800, max: 1900, user: 'testuser' },  // Expert to Candidate Master
                { current: 2000, max: 2100, user: 'testuser' },  // Candidate Master to Master
                { current: 2200, max: 2300, user: 'testuser' },  // Master to International Master
                { current: 2350, max: 2400, user: 'testuser' },  // International Master to Grandmaster
                { current: 2500, max: 2600, user: 'testuser' },  // Grandmaster to International Grandmaster
                { current: 2800, max: 3000, user: 'testuser' }   // International Grandmaster to Legendary
            ];
            
            output.innerHTML = '<h3>Enhanced Motivation Tests:</h3>';
            scenarios.forEach((scenario, index) => {
                const message = getMotivationalMessage(scenario.current, scenario.max, scenario.user);
                output.innerHTML += `
                    <div style="margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px;">
                        <h4>Scenario ${index + 1}: Current=${scenario.current}, Max=${scenario.max}</h4>
                        ${message}
                    </div>
                `;
            });
        }
        
        function testProblemsPopup() {
            const output = document.getElementById('test-output');
            
            // Mock problems data for testing
            const mockProblems = [
                {
                    contestId: 1234,
                    index: 'A',
                    name: 'Test Problem 1',
                    rating: 800,
                    url: 'https://codeforces.com/problemset/problem/1234/A'
                },
                {
                    contestId: 1234,
                    index: 'B',
                    name: 'Test Problem 2',
                    rating: 1200,
                    url: 'https://codeforces.com/problemset/problem/1234/B'
                },
                {
                    contestId: 1234,
                    index: 'C',
                    name: 'Test Problem 3',
                    rating: 1400,
                    url: 'https://codeforces.com/problemset/problem/1234/C'
                }
            ];
            
            output.innerHTML = '<h3>Problems Popup Test:</h3>';
            output.innerHTML += '<p>Click the button below to test the problems popup functionality:</p>';
            
            const testButton = document.createElement('button');
            testButton.className = 'cf-analytics-button';
            testButton.textContent = 'Show Greedy Problems';
            testButton.onclick = () => {
                showProblemsPopup('Greedy', mockProblems, 'topic');
            };
            output.appendChild(testButton);
            
            const testButton2 = document.createElement('button');
            testButton2.className = 'cf-analytics-button';
            testButton2.style.marginLeft = '10px';
            testButton2.textContent = 'Show Rating 1200 Problems';
            testButton2.onclick = () => {
                showProblemsPopup('Rating 1200', mockProblems.filter(p => p.rating === 1200), 'rating');
            };
            output.appendChild(testButton2);
        }
    </script>
</body>
</html>